(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2454],{63:(e,r,t)=>{"use strict";var s=t(7260);t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},489:(e,r,t)=>{"use strict";t.d(r,{b:()=>l});var s=t(2115),a=t(8142),i=t(5155),n=s.forwardRef((e,r)=>(0,i.jsx)(a.sG.label,{...e,ref:r,onMouseDown:r=>{var t;r.target.closest("button, input, select, textarea")||(null==(t=e.onMouseDown)||t.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));n.displayName="Label";var l=n},1712:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>T});var s=t(5155),a=t(2115),i=t(2619),n=t.n(i),l=t(4818),d=t(3998),o=t(6948),c=t(5142),u=t(6444),m=t(4446),h=t(3468),f=t(2556),p=t(3558),v=t(8108),x=t(4288),b=t(6842),g=t(8142),y="Checkbox",[j,w]=(0,h.A)(y),[N,k]=j(y),C=a.forwardRef((e,r)=>{let{__scopeCheckbox:t,name:i,checked:n,defaultChecked:l,required:d,disabled:o,value:c="on",onCheckedChange:u,form:h,...v}=e,[x,b]=a.useState(null),y=(0,m.s)(r,e=>b(e)),j=a.useRef(!1),w=!x||h||!!x.closest("form"),[k=!1,C]=(0,p.i)({prop:n,defaultProp:l,onChange:u}),E=a.useRef(k);return a.useEffect(()=>{let e=null==x?void 0:x.form;if(e){let r=()=>C(E.current);return e.addEventListener("reset",r),()=>e.removeEventListener("reset",r)}},[x,C]),(0,s.jsxs)(N,{scope:t,state:k,disabled:o,children:[(0,s.jsx)(g.sG.button,{type:"button",role:"checkbox","aria-checked":P(k)?"mixed":k,"aria-required":d,"data-state":A(k),"data-disabled":o?"":void 0,disabled:o,value:c,...v,ref:y,onKeyDown:(0,f.m)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,f.m)(e.onClick,e=>{C(e=>!!P(e)||!e),w&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})}),w&&(0,s.jsx)(S,{control:x,bubbles:!j.current,name:i,value:c,checked:k,required:d,disabled:o,form:h,style:{transform:"translateX(-100%)"},defaultChecked:!P(l)&&l})]})});C.displayName=y;var E="CheckboxIndicator",R=a.forwardRef((e,r)=>{let{__scopeCheckbox:t,forceMount:a,...i}=e,n=k(E,t);return(0,s.jsx)(b.C,{present:a||P(n.state)||!0===n.state,children:(0,s.jsx)(g.sG.span,{"data-state":A(n.state),"data-disabled":n.disabled?"":void 0,...i,ref:r,style:{pointerEvents:"none",...e.style}})})});R.displayName=E;var S=e=>{let{control:r,checked:t,bubbles:i=!0,defaultChecked:n,...l}=e,d=a.useRef(null),o=(0,v.Z)(t),c=(0,x.X)(r);a.useEffect(()=>{let e=d.current,r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==t&&r){let s=new Event("click",{bubbles:i});e.indeterminate=P(t),r.call(e,!P(t)&&t),e.dispatchEvent(s)}},[o,t,i]);let u=a.useRef(!P(t)&&t);return(0,s.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:null!=n?n:u.current,...l,tabIndex:-1,ref:d,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function P(e){return"indeterminate"===e}function A(e){return P(e)?"indeterminate":e?"checked":"unchecked"}var L=t(2251),z=t(4269);let F=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(C,{ref:r,className:(0,z.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...a,children:(0,s.jsx)(R,{className:(0,z.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(L.A,{className:"h-4 w-4"})})})});F.displayName=C.displayName;var D=t(5894),M=t(2033);let _=(0,t(4294).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var q=t(63),I=t(7820),O=t(8058),H=t(9253);function T(){let[e,r]=(0,a.useState)(""),[t,i]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[f,p]=(0,a.useState)(""),[v,x]=(0,a.useState)(""),[b,g]=(0,a.useState)(!1),[y,j]=(0,a.useState)(!1),{toast:w}=(0,D.dj)(),N=(0,q.useRouter)(),k=async r=>{if(r.preventDefault(),!e.trim())return void w({title:"Error",description:"Please enter a username.",variant:"destructive"});if(await (0,O.OQ)(e.trim()))return void w({title:"Error",description:"This username is already taken.",variant:"destructive"});if(!t.trim()||!/^\S+@\S+\.\S+$/.test(t))return void w({title:"Error",description:"Please enter a valid email.",variant:"destructive"});if(await (0,O.x2)(t.trim()))return void w({title:"Error",description:"An account with this email already exists.",variant:"destructive"});if(m.length<8)return void w({title:"Error",description:"Password must be at least 8 characters long.",variant:"destructive"});if(m!==f)return void w({title:"Error",description:"Passwords do not match.",variant:"destructive"});if(v.trim()&&await (0,O.r$)(v.trim()))return void w({title:"Error",description:"This rider number is already taken.",variant:"destructive"});if(!b)return void w({title:"Error",description:"You must agree to the Terms of Service and Privacy Policy.",variant:"destructive"});j(!0);try{let r=(await (0,H.eJ)(I.j2,t,m)).user,s={name:e,username:e.trim(),email:t.trim(),bio:"",balances:{gold:0,sweeps:0},betHistory:[],friendIds:[],riderNumber:v.trim()||"",mxhubStanding:0};await (0,O._m)(r.uid,s),w({title:"Account Created!",description:"Welcome! We're redirecting you to the sign-in page."}),N.push("/sign-in")}catch(e){console.error("Registration failed:",e),w({title:"Registration Failed",description:e.message||"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{j(!1)}};return(0,s.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,s.jsx)(l.z,{title:"Registration",description:"Create your MxHub account."}),(0,s.jsx)("form",{onSubmit:k,children:(0,s.jsxs)(o.Zp,{children:[(0,s.jsx)(o.aR,{children:(0,s.jsx)(o.ZB,{children:"Create Account"})}),(0,s.jsxs)(o.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.Label,{htmlFor:"username",children:"Username"}),(0,s.jsx)(c.p,{id:"username",placeholder:"Choose a username",value:e,onChange:e=>r(e.target.value),disabled:y,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.Label,{htmlFor:"email",children:"Email"}),(0,s.jsx)(c.p,{id:"email",type:"email",placeholder:"your@email.com",value:t,onChange:e=>i(e.target.value),disabled:y,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.Label,{htmlFor:"rider-number",children:"Rider Number"}),(0,s.jsx)(c.p,{id:"rider-number",placeholder:"e.g., 7",value:v,onChange:e=>x(e.target.value),disabled:y})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.Label,{htmlFor:"password",children:"Password"}),(0,s.jsx)(c.p,{id:"password",type:"password",placeholder:"Create a password",value:m,onChange:e=>h(e.target.value),disabled:y,required:!0}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Password must be at least 8 characters."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.Label,{htmlFor:"confirm-password",children:"Confirm Password"}),(0,s.jsx)(c.p,{id:"confirm-password",type:"password",placeholder:"Confirm your password",value:f,onChange:e=>p(e.target.value),disabled:y,required:!0})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,s.jsx)(F,{id:"terms",checked:b,onCheckedChange:e=>g(e),disabled:y}),(0,s.jsxs)("label",{htmlFor:"terms",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:["I agree to the ",(0,s.jsx)(n(),{href:"/policies",className:"text-primary underline",children:"Terms of Service"})," and ",(0,s.jsx)(n(),{href:"/policies",className:"text-primary underline",children:"Privacy Policy"})]})]})]}),(0,s.jsx)(o.wL,{children:(0,s.jsx)(d.$,{type:"submit",className:"w-full bg-red-600 hover:bg-red-700",disabled:y,children:y?(0,s.jsx)(M.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:["Create Account ",(0,s.jsx)(_,{className:"ml-2 h-4 w-4"})]})})})]})}),(0,s.jsxs)("p",{className:"mt-4 text-center text-sm text-muted-foreground",children:["Already have an account?"," ",(0,s.jsx)(n(),{href:"/sign-in",className:"font-semibold text-primary hover:underline",children:"Sign in here"})]})]})}},2033:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(4294).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2251:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(4294).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},4288:(e,r,t)=>{"use strict";t.d(r,{X:()=>i});var s=t(2115),a=t(4129);function i(e){let[r,t]=s.useState(void 0);return(0,a.N)(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});let r=new ResizeObserver(r=>{let s,a;if(!Array.isArray(r)||!r.length)return;let i=r[0];if("borderBoxSize"in i){let e=i.borderBoxSize,r=Array.isArray(e)?e[0]:e;s=r.inlineSize,a=r.blockSize}else s=e.offsetWidth,a=e.offsetHeight;t({width:s,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}t(void 0)},[e]),r}},4818:(e,r,t)=>{"use strict";t.d(r,{z:()=>a});var s=t(5155);function a(e){let{title:r,description:t,children:a}=e;return(0,s.jsx)("div",{className:"mb-8 relative",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"font-headline text-3xl font-bold tracking-tight md:text-4xl",children:r}),t&&(0,s.jsx)("p",{className:"mt-1 text-lg text-muted-foreground",children:t})]}),a]})})}},5142:(e,r,t)=>{"use strict";t.d(r,{p:()=>n});var s=t(5155),a=t(2115),i=t(4269);let n=a.forwardRef((e,r)=>{let{className:t,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n})});n.displayName="Input"},6444:(e,r,t)=>{"use strict";t.d(r,{Label:()=>o});var s=t(5155),a=t(2115),i=t(489),n=t(3101),l=t(4269);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(i.b,{ref:r,className:(0,l.cn)(d(),t),...a})});o.displayName=i.b.displayName},8108:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});var s=t(2115);function a(e){let r=s.useRef({value:e,previous:e});return s.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}},9643:(e,r,t)=>{Promise.resolve().then(t.bind(t,1712))}},e=>{e.O(0,[2992,3644,4909,4193,2619,4115,4944,8441,1255,7358],()=>e(e.s=9643)),_N_E=e.O()}]);