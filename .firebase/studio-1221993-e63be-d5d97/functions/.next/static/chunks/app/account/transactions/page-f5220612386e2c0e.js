(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4714],{63:(e,t,r)=>{"use strict";var s=r(7260);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},243:(e,t,r)=>{"use strict";r.d(t,{E:()=>a});var s=r(5155),n=r(4269);function a(e){let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-muted",t),...r})}},1554:(e,t,r)=>{"use strict";r.d(t,{R8:()=>c,As:()=>m,jt:()=>f});var s=r(5155),n=r(2115),a=r(7820),i=r(9891),d=r(5894);function o(){let{toast:e}=(0,d.dj)();return(0,n.useEffect)(()=>{let t=t=>{console.error(t),e({variant:"destructive",title:"Permission Error",description:"You do not have permission to perform this action. Check Firestore rules."})};return i.d.on("permission-error",t),()=>{i.d.off("permission-error",t)}},[e]),null}let l=(0,n.createContext)(null);function c(e){let{children:t}=e,[r,i]=(0,n.useState)({app:null,auth:null,db:null});(0,n.useEffect)(()=>{i({app:a.yA,auth:a.j2,db:a.db})},[]);let d=(0,n.useMemo)(()=>r,[r]);return(0,s.jsxs)(l.Provider,{value:d,children:[t,(0,s.jsx)(o,{})]})}let u=()=>{let e=(0,n.useContext)(l);if(!e)throw Error("useFirebase must be used within a FirebaseProvider");return e},f=()=>u().db,m=()=>u().auth},1647:(e,t,r)=>{"use strict";r.d(t,{E:()=>d});var s=r(5155);r(2115);var n=r(3101),a=r(4269);let i=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:r,...n}=e;return(0,s.jsx)("div",{className:(0,a.cn)(i({variant:r}),t),...n})}},2298:(e,t,r)=>{"use strict";r.d(t,{J:()=>a});var s=r(2115),n=r(1554);let a=()=>{let e=(0,n.As)(),[t,r]=(0,s.useState)((null==e?void 0:e.currentUser)||null),[a,i]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{if(!e)return;let t=e.onAuthStateChanged(e=>{r(e),i(!1)});return()=>t()},[e]),{user:t,isLoading:a}}},4269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var s=r(2821),n=r(5889);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,s.$)(t))}},4818:(e,t,r)=>{"use strict";r.d(t,{z:()=>n});var s=r(5155);function n(e){let{title:t,description:r,children:n}=e;return(0,s.jsx)("div",{className:"mb-8 relative",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"font-headline text-3xl font-bold tracking-tight md:text-4xl",children:t}),r&&(0,s.jsx)("p",{className:"mt-1 text-lg text-muted-foreground",children:r})]}),n]})})}},5894:(e,t,r)=>{"use strict";r.d(t,{dj:()=>u});var s=r(2115);let n=0,a=new Map,i=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},d=[],o={toasts:[]};function l(e){o=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(o,e),d.forEach(e=>{e(o)})}function c(e){let{...t}=e,r=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>l({type:"DISMISS_TOAST",toastId:r});return l({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function u(){let[e,t]=s.useState(o);return s.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},6217:(e,t,r)=>{Promise.resolve().then(r.bind(r,9149))},6948:(e,t,r)=>{"use strict";r.d(t,{BT:()=>l,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>d,wL:()=>u});var s=r(5155),n=r(2115),a=r(4269);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});d.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});o.displayName="CardTitle";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});l.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},7270:(e,t,r)=>{"use strict";r.d(t,{A0:()=>d,BF:()=>o,Hj:()=>l,XI:()=>i,nA:()=>u,nd:()=>c});var s=r(5155),n=r(2115),a=r(4269);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",r),...n})})});i.displayName="Table";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b",r),...n})});d.displayName="TableHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",r),...n})});o.displayName="TableBody",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...n})}).displayName="TableFooter";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("tr",{ref:t,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...n})});l.displayName="TableRow";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("th",{ref:t,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...n})});c.displayName="TableHead";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("td",{ref:t,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...n})});u.displayName="TableCell",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",r),...n})}).displayName="TableCaption"},7820:(e,t,r)=>{"use strict";r.d(t,{yA:()=>x,j2:()=>h,db:()=>p,Ge:()=>f,uN:()=>m,Jd:()=>o.J});var s=r(2078),n=r(9253),a=r(9708),i=r(8134),d=r(1554),o=r(2298),l=r(2115),c=r(9891);class u extends Error{constructor(e){super("FirestoreError: Missing or insufficient permissions: The following request was denied by Firestore Security Rules:\n".concat(JSON.stringify(e,null,2))),this.name="FirestorePermissionError",this.context=e}}function f(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{listen:!1},s=(0,d.jt)(),[n,i]=(0,l.useState)(null),[o,f]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let r;if(!s)return;r=t?(0,a.P)((0,a.rJ)(s,e),(0,a._M)(t[0],t[1],t[2])):(0,a.P)((0,a.rJ)(s,e));let n=(0,a.aQ)(r,e=>{i(e.docs.map(e=>({...e.data(),id:e.id}))),f(!1)},t=>{console.error("Error fetching collection:",t);let r=new u({path:e,operation:"list"});c.d.emit("permission-error",r),f(!1)});return()=>n()},[s,e,t,r.listen]),{data:n,isLoading:o}}function m(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{listen:!1},s=(0,d.jt)(),[n,i]=(0,l.useState)(null),[o,f]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{if(!s||!t)return void f(!1);let r=(0,a.H9)(s,e,t),n=(0,a.aQ)(r,e=>{e.exists()?i({...e.data(),id:e.id}):i(null),f(!1)},e=>{console.error("Error fetching document:",e);let t=new u({path:r.path,operation:"get"});c.d.emit("permission-error",t),f(!1)});return()=>n()},[s,e,t,r.listen]),{data:n,isLoading:o}}let x=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)({apiKey:"AIzaSyDNAADGPDDmXXTmOEPafwjb_wSE-EPd3E8",authDomain:"studio-122199390-e63be.firebaseapp.com",projectId:"studio-122199390-e63be",storageBucket:"studio-122199390-e63be.appspot.com",messagingSenderId:"553275156578",appId:"1:553275156578:web:cf7bd93695c99957b7c93b"}),h=(0,n.xI)(x),p=(0,a.aU)(x);(0,i.c7)(x)},9149:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(5155),n=r(2115),a=r(4818),i=r(63),d=r(7270),o=r(1647),l=r(6948),c=r(7820),u=r(243);function f(){return(0,s.jsxs)("div",{children:[(0,s.jsx)(a.z,{title:"Transaction History",description:"View your past exchange requests."}),(0,s.jsx)(l.Zp,{children:(0,s.jsx)(l.Wu,{className:"p-0",children:(0,s.jsxs)(d.XI,{children:[(0,s.jsx)(d.A0,{children:(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nd,{children:"Date"}),(0,s.jsx)(d.nd,{children:"Type"}),(0,s.jsx)(d.nd,{children:"Amount"}),(0,s.jsx)(d.nd,{children:"Status"})]})}),(0,s.jsx)(d.BF,{children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nA,{children:(0,s.jsx)(u.E,{className:"h-5 w-24"})}),(0,s.jsx)(d.nA,{children:(0,s.jsx)(u.E,{className:"h-5 w-20"})}),(0,s.jsx)(d.nA,{children:(0,s.jsx)(u.E,{className:"h-5 w-16"})}),(0,s.jsx)(d.nA,{children:(0,s.jsx)(u.E,{className:"h-6 w-24 rounded-full"})})]},t))})]})})})]})}function m(){let e=(0,i.useRouter)(),{user:t,isLoading:r}=(0,c.Jd)(),{data:u,isLoading:m}=(0,c.Ge)("exchangeRequests",t?["accountId","==",t.uid]:void 0,{listen:!0});if((0,n.useEffect)(()=>{r||t||e.push("/sign-in")},[r,t,e]),r||m)return(0,s.jsx)(f,{});let x=u?[...u].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()):[];return(0,s.jsxs)("div",{children:[(0,s.jsx)(a.z,{title:"Transaction History",description:"View your past exchange requests."}),(0,s.jsx)(l.Zp,{children:(0,s.jsx)(l.Wu,{className:"p-0",children:(0,s.jsxs)(d.XI,{children:[(0,s.jsx)(d.A0,{children:(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nd,{children:"Date"}),(0,s.jsx)(d.nd,{children:"Type"}),(0,s.jsx)(d.nd,{children:"Amount"}),(0,s.jsx)(d.nd,{children:"Status"})]})}),(0,s.jsx)(d.BF,{children:x.length>0?x.map(e=>(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nA,{children:new Date(e.date).toLocaleDateString()}),(0,s.jsx)(d.nA,{children:e.type}),(0,s.jsx)(d.nA,{children:e.amount.toLocaleString()}),(0,s.jsx)(d.nA,{children:(0,s.jsx)(o.E,{variant:"Approved"===e.status?"default":"Rejected"===e.status?"destructive":"secondary",className:"Approved"===e.status?"bg-green-600":"",children:e.status})})]},e.id)):(0,s.jsx)(d.Hj,{children:(0,s.jsx)(d.nA,{colSpan:4,className:"text-center h-24",children:"You have no transaction history."})})})]})})})]})}},9891:(e,t,r)=>{"use strict";r.d(t,{d:()=>s});let s=new(r(6459)).EventEmitter}},e=>{e.O(0,[2992,3644,4909,4193,8441,1255,7358],()=>e(e.s=6217)),_N_E=e.O()}]);