(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4714],{63:(e,t,r)=>{"use strict";var s=r(7260);r.o(s,"notFound")&&r.d(t,{notFound:function(){return s.notFound}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},243:(e,t,r)=>{"use strict";r.d(t,{E:()=>a});var s=r(5155),n=r(4269);function a(e){let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-muted",t),...r})}},1554:(e,t,r)=>{"use strict";r.d(t,{R8:()=>u,As:()=>m,jt:()=>f});var s=r(5155),n=r(2115),a=r(2949),i=r(9891),o=r(5894);function d(){let{toast:e}=(0,o.dj)();return(0,n.useEffect)(()=>{let t=t=>{console.error(t),e({variant:"destructive",title:"Permission Error",description:"You do not have permission to perform this action. Check Firestore rules."})};return i.d.on("permission-error",t),()=>{i.d.off("permission-error",t)}},[e]),null}let l=(0,n.createContext)(null);function u(e){let{children:t}=e,[r,i]=(0,n.useState)({app:null,auth:null,db:null});(0,n.useEffect)(()=>{i({app:a.yA,auth:a.j2,db:a.db})},[]);let o=(0,n.useMemo)(()=>r,[r]);return(0,s.jsxs)(l.Provider,{value:o,children:[t,(0,s.jsx)(d,{})]})}let c=()=>{let e=(0,n.useContext)(l);if(!e)throw Error("useFirebase must be used within a FirebaseProvider");return e},f=()=>c().db,m=()=>c().auth},1647:(e,t,r)=>{"use strict";r.d(t,{E:()=>o});var s=r(5155);r(2115);var n=r(3101),a=r(4269);let i=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...n}=e;return(0,s.jsx)("div",{className:(0,a.cn)(i({variant:r}),t),...n})}},2298:(e,t,r)=>{"use strict";r.d(t,{J:()=>a});var s=r(2115),n=r(1554);let a=()=>{let e=(0,n.As)(),[t,r]=(0,s.useState)((null==e?void 0:e.currentUser)||null),[a,i]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{if(!e)return;let t=e.onAuthStateChanged(e=>{r(e),i(!1)});return()=>t()},[e]),{user:t,isLoading:a}}},2949:(e,t,r)=>{"use strict";r.d(t,{yA:()=>p,j2:()=>x,db:()=>h,Ge:()=>f,uN:()=>m,Jd:()=>d.J});var s=r(2078),n=r(3885),a=r(9708),i=r(8134),o=r(1554),d=r(2298),l=r(2115),u=r(9891),c=r(6501);function f(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{listen:!1},s=(0,o.jt)(),[n,i]=(0,l.useState)(null),[d,f]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let r;if(!s)return void f(!1);if(t&&(void 0===t[2]||null===t[2])){i([]),f(!1);return}r=t?(0,a.P)((0,a.rJ)(s,e),(0,a._M)(t[0],t[1],t[2])):(0,a.P)((0,a.rJ)(s,e));let n=(0,a.aQ)(r,e=>{i(e.docs.map(e=>({...e.data(),id:e.id}))),f(!1)},t=>{console.error("Error fetching collection: ".concat(e),t);let r=new c.$({path:e,operation:"list"});u.d.emit("permission-error",r),f(!1)});return()=>n()},[s,e,r.listen,...t||[]]),{data:n,isLoading:d}}function m(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{listen:!1},s=(0,o.jt)(),[n,i]=(0,l.useState)(null),[d,f]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{if(!s||!t){i(null),f(!1);return}let r=(0,a.H9)(s,e,t),n=(0,a.aQ)(r,e=>{e.exists()?i({...e.data(),id:e.id}):i(null),f(!1)},e=>{console.error("Error fetching document:",e);let t=new c.$({path:r.path,operation:"get"});u.d.emit("permission-error",t),f(!1)});return()=>n()},[s,e,t,r.listen]),{data:n,isLoading:d}}let p=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)({apiKey:"AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",authDomain:"your-project-id.firebaseapp.com",projectId:"your-project-id",storageBucket:"your-project-id.appspot.com",messagingSenderId:"your-sender-id",appId:"1:your-sender-id:web:your-app-id"}),x=(0,n.xI)(p),h=(0,a.aU)(p);(0,i.c7)(p)},4269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var s=r(2821),n=r(5889);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,s.$)(t))}},4818:(e,t,r)=>{"use strict";r.d(t,{z:()=>a});var s=r(5155),n=r(4269);function a(e){let{title:t,description:r,children:a,className:i}=e;return(0,s.jsx)("div",{className:(0,n.cn)("mb-8 relative",i),children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"font-headline text-3xl font-bold tracking-tight md:text-4xl",children:t}),r&&(0,s.jsx)("p",{className:"mt-1 text-lg text-muted-foreground",children:r})]}),a]})})}},5894:(e,t,r)=>{"use strict";r.d(t,{dj:()=>c});var s=r(2115);let n=0,a=new Map,i=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},o=[],d={toasts:[]};function l(e){d=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>l({type:"DISMISS_TOAST",toastId:r});return l({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function c(){let[e,t]=s.useState(d);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},6217:(e,t,r)=>{Promise.resolve().then(r.bind(r,9149))},6501:(e,t,r)=>{"use strict";r.d(t,{$:()=>s});class s extends Error{constructor(e){super("FirestoreError: Missing or insufficient permissions: The following request was denied by Firestore Security Rules:\n".concat(JSON.stringify(e,null,2))),this.name="FirestorePermissionError",this.context=e}}},6948:(e,t,r)=>{"use strict";r.d(t,{BT:()=>l,Wu:()=>u,ZB:()=>d,Zp:()=>i,aR:()=>o,wL:()=>c});var s=r(5155),n=r(2115),a=r(4269);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});o.displayName="CardHeader";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});d.displayName="CardTitle";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});l.displayName="CardDescription";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});u.displayName="CardContent";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})});c.displayName="CardFooter"},7270:(e,t,r)=>{"use strict";r.d(t,{A0:()=>o,BF:()=>d,Hj:()=>l,XI:()=>i,nA:()=>c,nd:()=>u});var s=r(5155),n=r(2115),a=r(4269);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",r),...n})})});i.displayName="Table";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b",r),...n})});o.displayName="TableHeader";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",r),...n})});d.displayName="TableBody",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...n})}).displayName="TableFooter";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("tr",{ref:t,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...n})});l.displayName="TableRow";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("th",{ref:t,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...n})});u.displayName="TableHead";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("td",{ref:t,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...n})});c.displayName="TableCell",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",r),...n})}).displayName="TableCaption"},9149:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(5155),n=r(2115),a=r(4818),i=r(63),o=r(7270),d=r(1647),l=r(6948),u=r(2949),c=r(243);function f(){return(0,s.jsxs)("div",{children:[(0,s.jsx)(a.z,{title:"Transaction History",description:"View your past exchange requests."}),(0,s.jsx)(l.Zp,{children:(0,s.jsx)(l.Wu,{className:"p-0",children:(0,s.jsxs)(o.XI,{children:[(0,s.jsx)(o.A0,{children:(0,s.jsxs)(o.Hj,{children:[(0,s.jsx)(o.nd,{children:"Date"}),(0,s.jsx)(o.nd,{children:"Type"}),(0,s.jsx)(o.nd,{children:"Amount"}),(0,s.jsx)(o.nd,{children:"Status"})]})}),(0,s.jsx)(o.BF,{children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)(o.Hj,{children:[(0,s.jsx)(o.nA,{children:(0,s.jsx)(c.E,{className:"h-5 w-24"})}),(0,s.jsx)(o.nA,{children:(0,s.jsx)(c.E,{className:"h-5 w-20"})}),(0,s.jsx)(o.nA,{children:(0,s.jsx)(c.E,{className:"h-5 w-16"})}),(0,s.jsx)(o.nA,{children:(0,s.jsx)(c.E,{className:"h-6 w-24 rounded-full"})})]},t))})]})})})]})}function m(){let e=(0,i.useRouter)(),{user:t,isLoading:r}=(0,u.Jd)(),{data:c,isLoading:m}=(0,u.Ge)("exchangeRequests",["accountId","==",null==t?void 0:t.uid],{listen:!0});if((0,n.useEffect)(()=>{r||t||e.push("/sign-in")},[r,t,e]),r||m)return(0,s.jsx)(f,{});let p=c?[...c].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()):[];return(0,s.jsxs)("div",{children:[(0,s.jsx)(a.z,{title:"Transaction History",description:"View your past exchange requests."}),(0,s.jsx)(l.Zp,{children:(0,s.jsx)(l.Wu,{className:"p-0",children:(0,s.jsxs)(o.XI,{children:[(0,s.jsx)(o.A0,{children:(0,s.jsxs)(o.Hj,{children:[(0,s.jsx)(o.nd,{children:"Date"}),(0,s.jsx)(o.nd,{children:"Type"}),(0,s.jsx)(o.nd,{children:"Amount"}),(0,s.jsx)(o.nd,{children:"Status"})]})}),(0,s.jsx)(o.BF,{children:p.length>0?p.map(e=>(0,s.jsxs)(o.Hj,{children:[(0,s.jsx)(o.nA,{children:new Date(e.date).toLocaleDateString()}),(0,s.jsx)(o.nA,{children:e.type}),(0,s.jsx)(o.nA,{children:e.amount.toLocaleString()}),(0,s.jsx)(o.nA,{children:(0,s.jsx)(d.E,{variant:"Approved"===e.status?"default":"Rejected"===e.status?"destructive":"secondary",className:"Approved"===e.status?"bg-green-600":"",children:e.status})})]},e.id)):(0,s.jsx)(o.Hj,{children:(0,s.jsx)(o.nA,{colSpan:4,className:"text-center h-24",children:"You have no transaction history."})})})]})})})]})}},9891:(e,t,r)=>{"use strict";r.d(t,{d:()=>s});let s=new(r(6459)).EventEmitter}},e=>{e.O(0,[2992,7811,4909,2381,8441,1255,7358],()=>e(e.s=6217)),_N_E=e.O()}]);