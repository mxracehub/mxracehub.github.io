(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8624],{243:(e,s,t)=>{"use strict";t.d(s,{E:()=>n});var a=t(5155),r=t(4269);function n(e){let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",s),...t})}},991:(e,s,t)=>{"use strict";t.d(s,{k:()=>l});var a=t(5155),r=t(2115),n=t(9484),i=t(4269);let l=r.forwardRef((e,s)=>{let{className:t,value:r,...l}=e;return(0,a.jsx)(n.bL,{ref:s,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...l,children:(0,a.jsx)(n.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});l.displayName=n.bL.displayName},1293:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var a=t(5155),r=t(2115),n=t(2619),i=t.n(n),l=t(4818),d=t(3998),o=t(6948),c=t(5142),u=t(6444),m=t(2033),x=t(4550),h=t(5894),f=t(8058),p=t(63),g=t(2949),j=t(243),v=t(991);function N(){return(0,a.jsxs)("div",{children:[(0,a.jsx)(l.z,{title:"Sweeps Coin Exchange",description:"Transfer your Sweeps Coins to the Mx Exchange app for redemption."}),(0,a.jsxs)("div",{className:"mx-auto grid max-w-4xl gap-8 lg:grid-cols-5",children:[(0,a.jsx)("div",{className:"lg:col-span-3",children:(0,a.jsxs)(o.Zp,{children:[(0,a.jsxs)(o.aR,{children:[(0,a.jsx)(o.ZB,{children:"Initiate Transfer"}),(0,a.jsx)(o.BT,{children:"Enter the amount of Sweeps Coins you wish to send to your linked Mx Exchange account."})]}),(0,a.jsxs)(o.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.J,{htmlFor:"amount",children:"Amount to Transfer"}),(0,a.jsx)(j.E,{className:"h-10 w-full"})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-muted/50 p-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Redemption Value"}),(0,a.jsx)(j.E,{className:"h-8 w-24 mt-1"})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Minimum transfer amount: 50.00 Sweeps Coins."})]}),(0,a.jsx)(o.wL,{children:(0,a.jsx)(j.E,{className:"h-11 w-52"})})]})}),(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)(o.Zp,{className:"bg-muted/50",children:[(0,a.jsx)(o.aR,{children:(0,a.jsx)(o.ZB,{children:"Your Balance"})}),(0,a.jsxs)(o.Wu,{children:[(0,a.jsx)(j.E,{className:"h-10 w-32"}),(0,a.jsx)("div",{className:"text-muted-foreground mt-1",children:"Sweeps Coins"})]})]})})]})]})}function b(){let e=(0,p.useRouter)(),{toast:s}=(0,h.dj)(),{user:t,isLoading:n}=(0,g.Jd)(),{data:j,isLoading:b}=(0,g.uN)("accounts",null==t?void 0:t.uid),{data:w,isLoading:y}=(0,g.Ge)("exchangeRequests",["accountId","==",null==t?void 0:t.uid],{listen:!0}),[S,C]=(0,r.useState)(""),[E,R]=(0,r.useState)(!1);(0,r.useEffect)(()=>{n||t||e.push("/sign-in")},[n,t,e]);let F=(0,r.useMemo)(()=>{let e=Number(S);return e>0?(e/100).toFixed(2):"0.00"},[S]),L=(0,r.useMemo)(()=>{if(!w)return 0;let e=new Date().getMonth(),s=new Date().getFullYear();return w.filter(t=>{let a=new Date(t.date);return"Sweeps Coin"===t.type&&"Approved"===t.status&&a.getMonth()===e&&a.getFullYear()===s}).reduce((e,s)=>e+s.amount/100,0)},[w]),k=async a=>{a.preventDefault();let r=Number(S);if(!j||!t){s({title:"Error",description:"Could not find user account. Please sign in again.",variant:"destructive"}),e.push("/sign-in");return}if("FL"===j.state&&L+r/100>5e3)return void s({title:"Florida Redemption Limit",description:"You have reached your monthly redemption limit of $".concat(5e3.toLocaleString(),". You have already redeemed $").concat(L.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," this month."),variant:"destructive"});if(!r||r<=0)return void s({title:"Invalid Amount",description:"Please enter a valid amount to transfer.",variant:"destructive"});if(r<50)return void s({title:"Minimum Amount",description:"The minimum transfer amount is 50 Sweeps Coins.",variant:"destructive"});if(r>j.balances.sweeps)return void s({title:"Insufficient Balance",description:"You do not have enough Sweeps Coins to complete this transfer.",variant:"destructive"});R(!0);try{let a=j.balances.sweeps-r;await (0,f.z0)(t.uid,{balances:{...j.balances,sweeps:a}}),await (0,f.K1)({accountId:t.uid,accountName:j.name,amount:r,date:new Date().toISOString().split("T")[0],status:"Pending",type:"Sweeps Coin"}),s({title:"Transfer Submitted!",description:"Your request to transfer ".concat(r.toLocaleString()," Sweeps Coins has been submitted.")}),e.push("/account/transactions")}catch(e){console.error(e),s({title:"Error",description:"Failed to submit transfer request. Please try again.",variant:"destructive"})}finally{R(!1)}};return n||b||y?(0,a.jsx)(N,{}):j?(0,a.jsxs)("div",{children:[(0,a.jsx)(l.z,{title:"Sweeps Coin Exchange",description:"Transfer your Sweeps Coins to the Mx Exchange app for redemption."}),(0,a.jsxs)("div",{className:"mx-auto grid max-w-4xl gap-8 lg:grid-cols-5",children:[(0,a.jsx)("div",{className:"lg:col-span-3",children:(0,a.jsx)("form",{onSubmit:k,children:(0,a.jsxs)(o.Zp,{children:[(0,a.jsxs)(o.aR,{children:[(0,a.jsx)(o.ZB,{children:"Initiate Transfer"}),(0,a.jsx)(o.BT,{children:"Enter the amount of Sweeps Coins you wish to send to your linked Mx Exchange account."})]}),(0,a.jsxs)(o.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.J,{htmlFor:"amount",children:"Amount to Transfer"}),(0,a.jsx)(c.p,{id:"amount",type:"number",placeholder:"e.g., 100",value:S,onChange:e=>C(e.target.value),disabled:E,required:!0})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-muted/50 p-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Redemption Value"}),(0,a.jsxs)("p",{className:"mt-1 text-2xl font-bold",children:["$",F]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"100 Sweeps Coins = $1.00 USD."})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Minimum transfer amount: 50.00 Sweeps Coins."}),(null==j?void 0:j.state)==="FL"&&(0,a.jsxs)("div",{className:"rounded-lg border bg-yellow-900/50 p-4 text-sm mt-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-yellow-300",children:"Florida Redemption Limit"}),(0,a.jsxs)("p",{className:"text-muted-foreground mt-1",children:["You have redeemed $",L.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," of your $5,000.00 monthly limit."]}),(0,a.jsx)(v.k,{value:L/5e3*100,className:"mt-2 h-2"})]})]}),(0,a.jsx)(o.wL,{children:(0,a.jsxs)(d.$,{size:"lg",type:"submit",disabled:E,children:[E?(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"}),E?"Transferring...":"Transfer to Mx Exchange"]})})]})})}),(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)(o.Zp,{className:"bg-muted/50",children:[(0,a.jsx)(o.aR,{children:(0,a.jsx)(o.ZB,{children:"Your Balance"})}),(0,a.jsxs)(o.Wu,{children:[(0,a.jsx)("div",{className:"text-4xl font-bold",children:j.balances.sweeps.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,a.jsx)("div",{className:"text-muted-foreground",children:"Sweeps Coins"})]})]}),(0,a.jsxs)(o.Zp,{className:"mt-4",children:[(0,a.jsx)(o.aR,{children:(0,a.jsx)(o.ZB,{className:"text-base font-semibold",children:"How it works:"})}),(0,a.jsx)(o.Wu,{children:(0,a.jsxs)("ol",{className:"list-inside list-decimal space-y-1 text-sm text-muted-foreground",children:[(0,a.jsx)("li",{children:"Enter the transfer amount on this page."}),(0,a.jsx)("li",{children:"Confirm the internal transaction."}),(0,a.jsx)("li",{children:"Your coins will be sent to the exchange system."}),(0,a.jsx)("li",{children:"Use the link below to visit Mx Exchange to complete your redemption."})]})}),(0,a.jsx)(o.wL,{children:(0,a.jsx)(d.$,{asChild:!0,className:"w-full",variant:"secondary",children:(0,a.jsx)(i(),{href:"https://mx-exchange.example.com",target:"_blank",children:"Go to Mx Exchange"})})})]})]})]})]}):(0,a.jsx)("div",{children:"Account not found. Please try again later."})}},4689:(e,s,t)=>{Promise.resolve().then(t.bind(t,1293))},4818:(e,s,t)=>{"use strict";t.d(s,{z:()=>n});var a=t(5155),r=t(4269);function n(e){let{title:s,description:t,children:n,className:i}=e;return(0,a.jsx)("div",{className:(0,r.cn)("mb-8 relative",i),children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"font-headline text-3xl font-bold tracking-tight md:text-4xl",children:s}),t&&(0,a.jsx)("p",{className:"mt-1 text-lg text-muted-foreground",children:t})]}),n]})})}},5142:(e,s,t)=>{"use strict";t.d(s,{p:()=>i});var a=t(5155),r=t(2115),n=t(4269);let i=r.forwardRef((e,s)=>{let{className:t,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});i.displayName="Input"},6444:(e,s,t)=>{"use strict";t.d(s,{J:()=>o});var a=t(5155),r=t(2115),n=t(489),i=t(3101),l=t(4269);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.b,{ref:s,className:(0,l.cn)(d(),t),...r})});o.displayName=n.b.displayName},6948:(e,s,t)=>{"use strict";t.d(s,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>l,wL:()=>u});var a=t(5155),r=t(2115),n=t(4269);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});i.displayName="Card";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});l.displayName="CardHeader";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});d.displayName="CardTitle";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...r})});c.displayName="CardContent";let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})});u.displayName="CardFooter"}},e=>{e.O(0,[2992,7811,4909,2619,2381,4684,6301,1005,8441,1255,7358],()=>e(e.s=4689)),_N_E=e.O()}]);